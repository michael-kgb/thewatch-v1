function validateEmail(e){var t=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)}$("a.addtocart").on("click",function(e){if(e.preventDefault(),$("select.color").length&&"0"===$("select.color")[0].value)return $("div.cart-add-error.error").show(),void $("div.cart-add-error.error span").html("* Please Select Color");if($("select.qty").length&&"0"===$("select.qty")[0].value)return $("div.cart-add-error.error").show(),void $("div.cart-add-error.error span").html("* Please Select Quantity");var t=$("select.color").length?$("select.color")[0].value:"",i=$("input[name=product_id]")[0].value,a="",n=$("select.color").length?$("select.color option:selected").attr("attributeId"):0,r=$("select.qty")[0].value,o=$(".product-name span")[0].textContent,s=$("input[name=price]")[0].value,c=$("input[name=brand_name]")[0].value,l=$("input[name=link-rewrite]")[0].value,d=$("select.color").length?$("select.color option:selected").text():"",u=$("input[name=weight]")[0].value,p=$("select.color").length?$("a[id="+t+"]").attr("data-image"):$("a[id=0]").attr("data-image"),m=[{id:i,product_attribute_id:n,reference:a,name:o,brand_name:c,unit_price:s,total_price:s*r,attribute_value_id:t,color:d,quantity:r,weight:u,url:baseUrl+"/product/"+l,image:{url:p}}];$.ajax({type:"POST",url:baseUrl+"/cart/checkout/add-item",data:{cart:{items:m}},success:function(e){$("div#box-cart").html(e),$("#arrow-cart").slideDown(),$("#box-cart").slideDown(),$("html, body").animate({scrollTop:0},"slow")}})}),$("a.apply-code").on("click",function(e){e.preventDefault();var t=$("input[name=code]").val();$("span#total-price");$.ajax({type:"POST",dataType:"json",url:baseUrl+"/cart/voucher/check",data:{code:t},beforeSend:function(){},success:function(e){var t=e;t.valid&&($("span#discount").html(t.currency+" "+t.discount),$("span#total-price").html(t.currency+" "+t.total))}})}),$("select#payment_method").on("change",function(){if("0"!==$("select#payment_method")[0].value){var e=$("select#payment_method")[0].value;$.ajax({type:"GET",url:baseUrl+"/cart/payment/get-payment-list/"+e,success:function(e){$(".creditcardform").hide(),$(".installmentform").hide(),$("div.payment").html(e)}})}}),$("a#payment-info").on("click",function(e){return e.preventDefault(),$("input:radio[id=cc]").is(":checked")&&$(function(){function e(e){console.log(e),e.redirect_url?(console.log("3D SECURE"),t(e.redirect_url)):"200"==e.status_code?($("#token_id").val(e.token_id),$("#payment-form").submit()):(console.log(e.status_code),alert(e.status_message),$("button").removeAttr("disabled"))}function t(e){$.fancybox.open({href:e,type:"iframe",autoSize:!1,width:700,height:500,closeBtn:!1,modal:!0})}Veritrans.url="https://api.sandbox.veritrans.co.id/v2/token",Veritrans.client_key="VT-client-mjABlnYixiNp15XZ",$("input[name=payment_id]").val($("input:radio:checked")[0].value),$("input[name=payment_method_id]").val($("select#payment_method option:selected")[0].value);var i=function(){return{card_number:$(".card-number").val(),card_exp_month:$("select#card-expiry-month option:selected")[0].value,card_exp_year:$("select#card-expiry-year option:selected")[0].value,card_cvv:$(".card-cvv").val(),secure:!0,gross_amount:grossamount,bank:"bni"}};return console.log("SUBMIT"),Veritrans.token(i,e),!1}),$("input:radio[id=ip]").is(":checked")&&(console.log($("input:radio:checked")[0].value),console.log($("select#payment_method option:selected")[0].value),console.log($("select#installmentplan option:selected")[0].value),$.ajax({type:"POST",url:baseUrl+"/cart/checkout/step/paymentinformation",data:{paymentMethod:{payment_id:$("input:radio:checked")[0].value,payment_method_id:$("select#payment_method option:selected")[0].value,installment_plan:$("select#installmentplan option:selected")[0].value}},beforeSend:function(){},success:function(e){window.location.href=baseUrl+"/cart/checkout/step/revieworder"}})),$("input:radio:checked").length<1?($("div.payment-error").show(),!1):$("#agreement").is(":checked")?($("div.payment-error").hide(),$("div.agreement-error").hide(),void $.ajax({type:"POST",url:baseUrl+"/cart/checkout/step/paymentinformation",data:{paymentMethod:{payment_id:$("input:radio:checked")[0].value,payment_method_id:$("select#payment_method option:selected")[0].value}},beforeSend:function(){},success:function(e){window.location.href=baseUrl+"/cart/checkout/step/revieworder"}})):($("div.agreement-error").show(),!1)}),$("div#signin-btn").on("click",function(e){e.preventDefault();var t=$("input[name=email]").val(),i=$("input[name=password]").val();return""===t?($("span#email-signin-error").show(),void $("span#email-signin-error").html("* Email Is Required!")):validateEmail(t)?($("span#email-signin-error").hide(),""===i?($("span#signin-pwderror").show(),void $("span#signin-pwderror").html("* Password Is Required!")):($("span#signin-pwderror").hide(),void $.ajax({type:"POST",url:baseUrl+"/customer/sign-in",data:{email:$("input[name=email]")[0].value,password:$("input[name=password]")[0].value},success:function(e){var t=e;return"FALSE"===t?void $("span#signintop-error").show():void(window.location.href=baseUrl+"/user/profile")}}))):($("span#email-signin-error").show(),void $("span#email-signin-error").html("* Email Is Not Valid!"))}),$("div#signup-btn").on("click",function(e){e.preventDefault();var t=$("input[name=signup_email]").val(),i=$("input[name=fname]").val(),a=$("input[name=signup_password]").val();return""===t?($("span#email-error").show(),void $("span#email-error").html("* Email Is Required!")):validateEmail(t)?($("span#email-error").hide(),""===i?($("span#firstname-error").show(),void $("span#firstname-error").html("* First Name Is Required!")):($("span#firstname-error").hide(),""===a?($("span#signup-pwderror").show(),void $("span#signup-pwderror").html("* Password Is Required!")):($("span#signup-pwderror").hide(),void $.ajax({type:"POST",url:baseUrl+"/customer/sign-up",data:{customerInfo:{email:$("input[name=signup_email]")[0].value,fname:$("input[name=fname]")[0].value,lname:"",password:$("input[name=signup_password]")[0].value,newsletter:$("input[name=rc002]")[0].value}},success:function(e){var t=e;return"FALSE"===t?void $("span#signuptop-error").show():void location.reload()}})))):($("span#email-error").show(),void $("span#email-error").html("* Email Is Not Valid!"))}),$("div#signup").on("click",function(e){e.preventDefault(),$("div#signup-form").show(),$("div#signup").css("border","1px solid #000"),$("div#signup").css("background","#ffffff"),$("div#signup").css("color","#000"),$("div#signin-form").hide(),$("div#signin").css("border","1px solid #000"),$("div#signin").css("background","#000"),$("div#signin").css("color","#fff"),$("div#signin-box").hide(),$("div#signup-box").show(),$("div#forgot-btn-box").hide(),$("div#forgot-form-box").hide(),$("div#forgot-form-content").hide()}),$("div#signin").on("click",function(e){e.preventDefault(),$("div#signup-form").hide(),$("div#signup").css("border","1px solid #000"),$("div#signup").css("background","#000"),$("div#signup").css("color","#ffffff"),$("div#signin-form").show(),$("div#signin").css("border","1px solid #000"),$("div#signin").css("background","#ffffff"),$("div#signin").css("color","#000"),$("div#signin-box").show(),$("div#signup-box").hide()}),$("input:radio[name=shipping]").on("change",function(){$("select.shipping").prop("disabled",!1),$.ajax({type:"POST",url:baseUrl+"/shipping/generate-shipping-method",data:{customer_address_id:$("input:radio[name=shipping]:checked")[0].value},beforeSend:function(){},success:function(e){$("div.step-purchase.shipping-method").html(e)}})}),$("a#delivery-list").on("click",function(e){if(e.preventDefault(),$("input:radio:checked").length>0){var t=$("input:radio:checked")[0].value;return $("div.signup-error").hide(),void $.ajax({type:"POST",url:baseUrl+"/cart/checkout/shipping-submit",data:{customer_address_id:t,shipping_method:$("select#shipping-method").length?$("select#shipping-method option:selected").val():0},success:function(e){window.location.href=baseUrl+"/cart/checkout/step/paymentinformation"}})}$("div.signup-error").show()}),$("a#removeItem").on("click",function(e){e.preventDefault();var t=$(this).attr("data-id"),i=$(this).attr("attributeId");$.ajax({type:"POST",url:baseUrl+"/cart/checkout/remove-item",data:{id:t,attributeId:i},beforeSend:function(){},success:function(e){$("div#box-cart").html(e)}}),$("section#shopping-bag").length&&$.ajax({type:"POST",url:baseUrl+"/cart/checkout/remove-cart-item",data:{id:t,attributeId:i},beforeSend:function(){},success:function(e){$("section#shopping-bag").html(e)}})}),$("a#removeCartItem").on("click",function(e){e.preventDefault();var t=$(this).attr("data-id"),i=$(this).attr("attributeId");$.ajax({type:"POST",url:baseUrl+"/cart/checkout/remove-cart-item",data:{id:t,attributeId:i},beforeSend:function(){},success:function(e){$("section#shopping-bag").html(e)}}),$.ajax({type:"POST",url:baseUrl+"/cart/checkout/remove-item",data:{id:t,attributeId:i},beforeSend:function(){},success:function(e){$("div#box-cart").html(e)}})}),$("select.color").on("change",function(){if("0"!==$("select.color")[0].value){$("select.qty").prop("disabled",!1),$("div.cart-add-error.error").hide();var e=$("#product-img").data("elevateZoom"),t=$("select.color")[0].value,i=$("select.color option:selected").attr("attributeId");$.ajax({type:"POST",url:baseUrl+"/stock/quantity",data:{attribute_value_id:i},beforeSend:function(){$("#loadingAjax").fadeIn(200,function(){}),$("span.product-total").hide()},success:function(i){$("#loadingAjax").fadeOut(200,function(){}),$("span.product-total").show(),$("select.qty").html(i),$("li.small-thumb").hide(),$("li[id="+t+"]").show();var a=$("li#"+t).attr("data-image"),n=$("li#"+t).attr("data-zoom-image");$("li[id="+t+"]").length<=6?($(".btn-prev").hide(),$(".btn-next").hide()):($(".btn-prev").show(),$(".btn-next").show()),$("#thumb-small").css("top","0"),e.swaptheimage(a,n);var r=$("select.qty option:selected").text();"Out Of Stock"===$.trim(r)?($(".product-addtocart").hide(),$(".product-notifyme").show()):($(".product-addtocart").show(),$(".product-notifyme").hide())}})}else $("select.qty").val(0),$("span.product-total").html(""),$("select.qty").prop("disabled",!0),$(".product-addtocart").show(),$(".product-notifyme").hide(),$("select.qty option:selected").text("QTY")}),$("a#submit-notifyme").on("click",function(e){e.preventDefault();var t=$("input[name=email-notifyme]").val(),i=$("input[name=name-notifyme]").val(),a=$("input[name=product_id]").val(),n=$("select.color").length?$("select.color option:selected").attr("attributeId"):0;return""===i?($("span#name-notifyme-error").show(),$("span#name-notifyme-error").html("* Name Is Required!")):$("span#name-notifyme-error").hide(),""===t?($("span#email-notifyme-error").show(),void $("span#email-notifyme-error").html("* Email Is Required!")):validateEmail(t)?($("span#email-notifyme-error").hide(),void $.ajax({type:"POST",url:baseUrl+"/customer/notify",data:{product_id:a,product_attribute_id:n,email:t,fullname:i},success:function(e){var t=e;return"FALSE"===t?void $("span#error-notifyme").show():void("TRUE"===t&&$("span#success-notifyme").show())}})):($("span#email-notifyme-error").show(),void $("span#email-notifyme-error").html("* Email Is Not Valid!"))}),$("select.qty").on("change",function(){"0"!==$("select.qty")[0].value?($("div.cart-add-error.error").hide(),$.ajax({type:"POST",url:baseUrl+"/stock/price",data:{quantity:$("select.qty")[0].value,price:$("input.price").val()},beforeSend:function(){$("#loadingAjax").fadeIn(200,function(){}),$("span.product-total").hide()},success:function(e){$("#loadingAjax").css("display","none"),$("span.product-total").show(),$(".product-total").html(e)}})):$("span.product-total").html("")}),$("a#signin-checkout").on("click",function(e){e.preventDefault();var t=$("#email-signin").val(),i=$("#password-signin").val();if(""===t)$("span#email-signin-error").show(),$("span#email-signin-error").html("* Email Is Required!");else{if(!validateEmail(t))return $("span#email-signin-error").show(),void $("span#email-signin-error").html("* Email Is Not Valid!");$("span#email-signin-error").hide()}return""===i?($("span#password-signin-error").show(),void $("span#password-signin-error").html("* Password Is Required!")):($("span#password-signin-error").hide(),void $.ajax({type:"POST",url:baseUrl+"/cart/checkout/sign-in",data:{email:t,password:i},success:function(e){var t=e;return t?void(window.location.href=baseUrl+"/cart/checkout/step/deliveryinformation"):void $("span#signin-error").show()}}))}),$("a#signup-checkout").on("click",function(e){e.preventDefault();var t=$("#email").val(),i=$("#firstname_checkout_signup").val(),a=$("#password").val(),n=$("#cpassword").val();return""===t?($("span#email-error").show(),$("span#email-error").html("* Email Is Required!")):validateEmail(t)?$("span#email-error").hide():($("span#email-error").show(),$("span#email-error").html("* Email Is Not Valid!")),""===i?($("span#firstname-checkout-error").show(),$("span#firstname-checkout-error").html("* First Name Is Required!")):$("span#firstname-checkout-error").hide(),""===a?($("span#password-error").show(),$("span#password-error").html("* Password Is Required!")):$("span#password-error").hide(),""===n?($("span#password-confirm-error").show(),void $("span#password-confirm-error").html("* Password Is Required!")):n!==a?($("span#password-confirm-error").show(),void $("span#password-confirm-error").html("* Password Do Not Match!")):($("span#password-confirm-error").hide(),void $.ajax({type:"POST",url:baseUrl+"/cart/checkout/sign-up",data:{customerInfo:{email:t,fname:i,password:a,isNewCustomer:!0}},beforeSend:function(){},success:function(e){var t=e;return"FALSE"===t?void $("span#signup-error").show():void(window.location.href=baseUrl+"/cart/checkout/step/deliveryinformation")}}))}),$("a#add-shipping").on("click",function(e){e.preventDefault();var t=$("#fname").val(),i=$("#lname").val(),a=$("#phone").val(),n=$("#address").val(),r=$("#zip").val(),o=$("#province").val(),s=$("select#province option:selected").text(),c=$("#state").val(),l=$("select#state option:selected").text(),d=$("#district").val(),u=$("select#district option:selected").text(),p=$("#shipping-method").val(),m=$("select#shipping-method option:selected").text();$.ajax({type:"POST",url:baseUrl+"/cart/checkout/step/deliveryinformation",data:{shippingInformation:{fname:t,lname:i,phone:a,address:n,zip:r,province_id:o,province_name:s,state_id:c,state_name:l,district_id:d,district_name:u,shipping_method_id:p,shipping_method_name:m}},beforeSend:function(){},success:function(e){window.location.href=baseUrl+"/cart/checkout/step/deliveryinformation"}})}),$("select#province").on("change",function(e){if(e.preventDefault(),"0"!==$("select#province")[0].value){$("select#district").val(0),$("select#district").prop("disabled",!0),$("select#shipping-method").val(0),$("select#shipping-method").prop("disabled",!0);var t=$("select#province")[0].value;$.ajax({type:"POST",url:baseUrl+"/shipping/generate-state",data:{province_id:t},beforeSend:function(){},success:function(e){$("div.state").html(e)}})}else $("select#state").val(0),$("select#state").prop("disabled",!0),$("select#district").val(0),$("select#district").prop("disabled",!0),$("select#shipping-method").val(0),$("select#shipping-method").prop("disabled",!0)}),$("select#state").on("change",function(e){if(e.preventDefault(),"0"!==$("select#state")[0].value){var t=$("select#state")[0].value;$.ajax({type:"POST",url:baseUrl+"/shipping/generate-district",data:{state_id:t},beforeSend:function(){},success:function(e){$("div.district").html(e)}})}else $("select#district").val(0),$("select#district").prop("disabled",!0),$("select#shipping-method").val(0),$("select#shipping-method").prop("disabled",!0)}),$("select#district").on("change",function(e){if(e.preventDefault(),"0"!==$("select#district")[0].value){var t=$("select#district")[0].value;$.ajax({type:"POST",url:baseUrl+"/shipping/generate-shipping-method",data:{district_id:t},beforeSend:function(){},success:function(e){$("div.carrier-method").html(e)}})}else $("select#shipping-method").val(0),$("select#shipping-method").prop("disabled",!0)}),$("select#province-profile").on("change",function(e){if(e.preventDefault(),"0"!==$("select#province-profile")[0].value){$("select#district-profile").val(0),$("select#district-profile").prop("disabled",!0);var t=$("select#province-profile")[0].value;$.ajax({type:"POST",url:baseUrl+"/shipping/generate-state-profile",data:{province_id:t},beforeSend:function(){},success:function(e){$("div.state").html(e)}})}else $("select#state-profile").val(0),$("select#state-profile").prop("disabled",!0),$("select#district-profile").val(0),$("select#district-profile").prop("disabled",!0)}),$("a#search").on("click",function(e){e.preventDefault(),$("div.searchform").fadeIn(500,function(){$("input#search").focus()}),$("a#search").hide()}),$("input#search").on("focusout",function(){$("div.searchform").fadeOut(500,function(){$("a#search").show()})}),$("input#search").on("keypress",function(e){if(13===e.which){var t=$("input#search").val();return window.location.href=baseUrl+"/category/search?q="+t,!1}}),$("a#confirm-order").on("click",function(e){e.preventDefault(),$.ajax({type:"POST",url:baseUrl+"/cart/checkout/step/confirmorder",data:{_csrf:csrf},timeout:0,success:function(e){window.location.href=baseUrl+"/cart/checkout/step/ordercomplete"}})}),$("input:checkbox[id=agreement]").on("change",function(){$("#agreement").is(":checked")&&$("#agreementModal").modal("show")}),$("span.submit-search").on("click",function(){var e=$("input#search").val();window.location.href=baseUrl+"/category/search?q="+e}),$("a#submit-confirm").on("click",function(e){e.preventDefault();var t=$("input[name=customer_name]")[0].value,i=$("input[name=account_name]")[0].value,a=$("input[name=account_number]")[0].value,n=$("input[name=amount]")[0].value,r=$("input[name=transfer_to]")[0].value,o=$("input[name=transfer_method]")[0].value,s=$("input[name=orders_id]")[0].value,c=$("input[name=comments]")[0].value;$.ajax({type:"POST",url:baseUrl+"/user/order/confirmation/"+ordersId,data:{customer_name:t,account_name:i,account_number:a,amount:n,transfer_to:r,transfer_method:o,comments:c,orders_id:s},success:function(e){location.reload()}})}),$("#foo").slider({tooltip:"false"});var minPrice=3e5,maxPrice=15e6;$("#foo").slider().on("slide",function(e){$("#bar-left").html(e.value[0]),$("#bar-right").html(e.value[1]),minPrice=e.value[0],maxPrice=e.value[1]}),$("input#apply-filter").on("click",function(e){e.preventDefault();var t=[],i=[],a=[],n=[],r=[],o=[],s="",c="",l="",d="",u="",p="",m="",h="",v="",f=!1;$("input:checkbox[name=brands]:checked").each(function(){t.push(this.value),c="brands="+t.join("--"),f=!0}),$("input:checkbox[name=category]:checked").each(function(){var e=0,t=0,r=0;for(e=0;e<$("input:checkbox[name=category]:checked").length;e++)h=$("input:checkbox[name=category]:checked")[e].dataset.id,v!=h&&0==e?(v=h,a[t]=$("input:checkbox[name=category]:checked")[e].value):v!=h?(n[r]=[v,a],v=h,a=[],t=0,a[t]=$("input:checkbox[name=category]:checked")[e].value,r++):a[t]=$("input:checkbox[name=category]:checked")[e].value,t++;for(n[r]=[v,a],e=0;e<n.length;e++){for(m=n[e][0],i=[],t=0;t<n[e][1].length;t++)i.push(n[e][1][t]);f?l=l+"&"+m+"="+i.join("--"):(l=m+"="+i.join("--"),f=!0)}return!1}),$("input:radio[name=filter_size]:checked").each(function(){o.push(this.value),f?u="&size="+o.join("--"):(u="size="+o.join("--"),f=!0)}),$("input:radio[name=sort]:checked").each(function(){r.push(this.value),f?d="&sort="+r.join("--"):(d="sort="+r.join("--"),f=!0)}),p=f?"&price="+minPrice+"--"+maxPrice:"price="+minPrice+"--"+maxPrice,s=c+u+l+d+p,window.location.href=baseUrl+"/category/filter?"+s}),$("span.subscribe-newsletter").on("click",function(e){e.preventDefault(),$("#subscribeModal").modal("show")}),$("div#subscribe").on("click",function(e){e.preventDefault(),$.ajax({type:"POST",url:baseUrl+"/customer/subscribe",data:{firstname:$("input[name=firstname_subscribe]").val(),email:$("input[name=email_subscribe]").val(),_csrf:csrf},success:function(e){var t=e;"FALSE"!==t&&"TRUE"===t&&($("div.popup-subscribe-fname").hide(),$("div.popup-subscribe-email").hide(),$("div.popup-subscribe-button").hide(),$("div.popup-subscribe-title").hide(),$("div.subscribe.success.title").show(),$("div.subscribe.success.content").show())}})}),$("a#forgot-password").on("click",function(e){e.preventDefault(),$("div#forgot-btn-box").show(),$("div#forgot-form-box").show(),$("div#forgot-form-content").show(),$("div#signin-box").hide()}),$("div#retrieve-btn").on("click",function(e){e.preventDefault(),$.ajax({type:"POST",url:baseUrl+"/customer/forgot-password",data:{email:$("input[name=email_forgot]").val(),_csrf:csrf},success:function(e){var t=e}})});